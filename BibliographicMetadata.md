# Types of metadata

## Information about the book ("objective")

This category includes most of the common things you might want to
know about a book:

* Title
* Description
* Authors
* Identifiers, such as ISBN
* Which work it's an edition of
* Which series the book is in, and where it fits in that series.
* Format
* Publisher
* Language
* Classifications
* Excerpts
* Cover art

It also includes information about the content of the book:

* Table of contents
* Bibliography
* Characters in a work of fiction
* Real-life events and people mentioned in the book
* Other books mentioned in the book's bibliography

"Objective" is in quotes because some things like classification and
description can get a little subjective.

## Information about readers' interactions with the book ("subjective")

* Ratings
* The text of reviews (reader reviews and professional reviews)
* Popularity rankings (current and historical)
* Awards

"Subjective" is in quotes because some things like the popularity of
popularity of a book can be measured objectively.

## Facts about our inventory

It's essential to get this information from paid ebook
providers. Ideally we would have all this information, but some of it
isn't currently available:

* How many licenses we own.
* How many loans are left on each of those licenses.
* How many licenses are checked out, and when each checkout happened.
* How many licenses are reserved for one particular patron, and when each reservation happened.
* How many people are in the hold queue, and when they joined the hold queue.

# Metadata sources

Instead of the standardized vocabularies I'll cover later, most of
these use sources serve XML or JSON documents that use custom
vocabularies. To figure out exactly what the XML tag names and JSON
field names mean, you must consult some nearby piece of documentation.

## NYPL MARC

* Includes topics, genre, summary, and more.
* [A MARC XML record](http://catalog.nypl.org/xrecord=b20000382~S1) Compare [the same data in HTML](http://catalog.nypl.org/record=b20000382~S1)
* Matt is converting our MARC catalog to JSON. We'll see what data we have available in there once he's done.

## OCLC Classify

* [A free API](http://classify.oclc.org/classify2/) that can turn title/author or isbn into internal "work ids" or OCLC IDs. If we get internal "work ids", we can always turn them into a list of OCLC  IDs.  TODO: nail down terms of use. noncommercial?

* Author information is linked to VIAF [(e.g.)](http://viaf.org/viaf/71391324/), which makes it possible to localize author names.

## Worldcat Open Data

Significant amounts of bibliographic data available in RDF format, available once you know the OCLC ID. Data is made available under an [attribution-style license](http://opendatacommons.org/licenses/by/1.0/)

* [Example RDF](http://experiment.worldcat.org/oclc/795121502.rdf)
* Author information is linked to VIAF [(e.g.)](http://viaf.org/viaf/71391324/), which makes it possible to localize author names.

## OCLC xID

Maps between OCLC number, ISBN, OCLC work ID (owi), and LCCN.

* [Documentation for lookup by OCLC number](http://xisbn.worldcat.org/xisbnadmin/xoclcnum/api.htm)
* [Documentation for lookup by OCLC work id](http://xisbn.worldcat.org/webservices/xid/owi/)
* [Example](http://xisbn.worldcat.org/webservices/xid/oclcnum/797427636?method=getEditions&format=xml&fl=lccn,isbn,owi,url)
* [Terms of service](http://xisbn.worldcat.org/xisbnadmin/index.htm) Non-commercial use that does not exceed 1k accesses per day. More access is allowed via subscription. This requires a [WorldCat affiliate account](http://www.worldcat.org/wcpa/do/AffiliateUserServices?method=initSelfRegister&atype=xisbn).

This API is extremely prone to 500 errors. I don't think there's any reason to use it given the existence of WorldCat Open Data.

## Syndetics

This is a pay service but we are already paying for it. I don't have login/password credentials, so I can't get documentation or support, but I do know our API credential.

We can look up significant amounts of metadata (review, summary, excerpt) given ISBN or OCLC number.

* [Someone else's copy of the documentation I can't find elsewhere](https://developers.exlibrisgroup.com/resources/voyager/code_contributions/SyndeticsStarterDocument.pdf)

## 3M XML

A vocabulary for describing 3M Cloud Library's catalog. It looks to
have been autogenerated from the names used in C# classes on 3M's
side.

* Includes minimal objective metadata
* Includes no subjective metadata
* Includes some inventory metadata

## OverDrive JSON

Overdrive's [Metadata
API](https://developer.overdrive.com/apis/metadata) serves JSON
documents. Its other APIs also use this vocabulary when describing
books. Documents are served as a custom media type,
application/vnd.overdrive.api+json, but I don't think the media type
is formally defined anywhere.

* Includes decent objective metadata
* Supposedly includes subjective metadata, but it's pretty sparse
* The availability API includes some inventory metadata.

## Gutenberg Bookshelves

Project Gutenberg has a number of manually-created wiki [bookshelves](http://www.gutenberg.org/wiki/Category:Bookshelf) which divide books up by category. See for instance the [Children's Bookshelf](http://www.gutenberg.org/wiki/Category:Children%27s_Bookshelf).

## BiblioCommons

Bibliocommons's [Titles
API](http://developer.bibliocommons.com/docs/titles_id) serves JSON
documents that use custom terms like "authors", "isbns", and
"title". Each term is explicitly defined in the API documentation.

Documents are served as application/json. The internal format of the JSON
documents is not explicitly defined.

* Includes minimal objective metadata
* Includes no subjective metadata

### Working with Bibliocommons API
Anything that can be constructed as an Advanced Search can be structured for a paramaterized title search.

As discussed in [http://developer.bibliocommons.com/forum/read/155663](forum thread):
<blockquote>
Queries from advanced search can be passed using search_type=custom. For example:

https://api.bibliocommons.com/v1/titles.json?library=gvpl&search_type=custom&q=anywhere%3A(moondog)%20%20formatcode%3A(BK%20OR%20EBOOK)&api_key={key}
</blockquote>




## GoodReads

XML format.

* Includes good objective metadata
* Includes good subjective metadata, including reviews, but "harvesting and indexing" data is forbidden without permission.

## Booki.sh

* [Recommendation API](http://docs.bookishrecapi.apiary.io/)
* [Metadata API](http://docs.bookmetadata.apiary.io/)

Owned by Zola. We already buy access to the Bookish recommendation API. They also have a basic metadata API. I'm not sure if we get access to the metadata API under the same terms as the recommendation API.

Coverage is about 1.5 million books. Metadata comes from publishers and distributors. Primary key is ISBN13.

Zola is working on an API to (truncated) reviews of books and to estimate star ratings. Also working on a search API to map (e.g.) title/author to ISBN.

## iDreamBooks

"Metacritic for books". They have [a JSON-based API](http://idreambooks.com/api). We can get a list of recent critically acclaimed books and books that were recently featured on TV. For a given book we can get up to 5 critical reviews.

API TOS are oriented around displaying reviews directly to end-users.

* You agree to not use the API to redistribute, harvest or index iDreamBooks' data without our explicit consent.
* You agree to not truncate, modify or change our data.
* You may not store our data except for caching purposes.

## WikiData

* (Example: "The Art of War")[http://www.wikidata.org/wiki/Q8251] Good source for data about books (mostly PD books) We always get author information and link to Wikipedia page. If we're lucky we might get related images, author images, or summary. (First paragraph of Wikipedia page makes a decent summary in many cases.)

## Amazon Product Advertising API

XML format.

* Includes good objective metadata.
* Includes very good subjective metadata.

TOS forbids usage except to promote Amazon's products. I believe we
have more favorable usage terms if we scrape the website as a spider
rather than going through the API.

The [SNAP](https://snap.stanford.edu/data/web-Amazon.html) dataset has Amazon user reviews up to March 2013. We might be able to use it--I don't know what the terms are.

## NYT 

* [Best Sellers API](http://developer.nytimes.com/docs/best_sellers_api/) - Basic historical popularity information. Includes links to NYT reviews where appropriate.
* [Article Search API](http://developer.nytimes.com/docs/read/article_search_api_v2) - Can be used to [search for book reviews](http://developer.nytimes.com/forum/read/90523)

## USA Today

* [Book review API](http://developer.usatoday.com/docs/read/book_reviews) 
* [Best-selling books API](http://developer.usatoday.com/docs/read/bestselling_books) (apparently only for "personal, noncommercial use")
* [TOS](http://developer.usatoday.com/API_Terms_of_Use) "Your use of the USAT Census API, the USAT Books/Music/Movie Reviews API, and the USAT Articles API is not limited to your personal, noncommercial use and you may use those specific USAT APIs for commercial purposes."

## LibraryThing

Probably the most useful [set of bibliographic APIs](https://www.librarything.com/wiki/index.php/LibraryThing_APIs].

* [LibraryThing "What Work"](http://blog.librarything.com/thingology/2009/03/new-api-what-work/) looks up the LibraryThing "work" for an ISBN or title/author.
* [ThingTitle](http://blog.librarything.com/thingology/2006/08/introducing-the-thingtitle-api/) is similar but gives a little more information.
* Once we have the work ID, we can tie this into (ck.getwork)[http://www.librarything.com/services/rest/documentation/1.1/librarything.ck.getwork.php) to get access to Common Knowledge facts about the book.
* [Bunch of data feeds I haven't looked at.](http://www.librarything.com/feeds/)

* Very good objective metadata
* Very good subjective metadata, but reviews are behind a TOS-wall.

## Content Cafe 

Provides a variety of metadata. It's a paid service, but we're already paying for it.

* [Documentation](http://contentcafe2.btol.com/ContentCafe/ContentCafe.asmx)
* [Overview](http://contentcafe2.btol.com/ContentCafeClient/ContentCafe.aspx?UserID=[id]&Password=[pw]&ItemKey=9781594744495&Options=Y)
* [List of reviews](http://contentcafe2.btol.com/ContentCafeClient/ReviewsDetail.aspx?UserID=[id]&Password=[pw]&ItemKey=9781594744495&Options=Y)
* [Cover art](http://contentcafe2.btol.com/ContentCafe/Jacket.aspx?userID=[id]&password=[pw]&content=M&Return=1&Type=M&Value=9780698146815)

# Cover Art Sources

* Book records from 3M and Overdrive include links to covers for the book.
* We can [get covers from LibraryThing](http://blog.librarything.com/main/2008/08/a-million-free-covers-from-librarything/) for free, given an ISBN. We can only request one cover per second, and a max of 1,000 per day.
* Open Library has [bulk downloads of covers](https://openlibrary.org/dev/docs/api/covers).
* [Syndetic Solutions](http://www.bowker.com/en-US/products/syndetics/)
* [ChileFresh.com](www.chilefresh.com)
* [Content Cafe](http://www.ebscohost.com/ebooks/public)
* [Recovering the Classics](http://thecreativeactionnetwork.com/shop/&campaign=Recovering-the-Classics&s=0&tag=all)

# Vocabularies

All of these metadata sources use different made-up vocabularies to
talk about the same real-world objects (books).

Let's define a vocabulary as an agreed-upon set of real-world
semantics for otherwise meaningless strings. On its own, the word
"date" is ambiguous. It could refer to an object, an event, or a point
in time. To a computer, "date" is just a four-character string. It
doesn't mean anything at all. But in the Dublin Core vocabulary,
"date" has a precise meaning: it always refers to a point in time.

Two systems can only communicate with each other if they share a
vocabulary. Most vocabularies are ad hoc custom vocabularies designed
for one specific system. For instance, the 3M API uses terms like
"EventStartDateInUTC" whose meanings are defined only in the
documentation for the 3M API. (And sometimes not even then--terms like
"PhysicalISBN" are never formally defined.)

There are many, many vocabularies for describing books. It's probably
the most common type of vocabulary, after vocabularies for describing
people. For books, our problem is an abundance of *standardized*
vocabularies on top of the abundance of ad hoc vocabularies.

Some vocabularies are tied to a format (ONIX, Atom). Some are tied not
only to a format but to a specific piece of software (OverDrive,
3M). Some are format-neutral (Dublin Core,
http://schema.org/Book). But each vocabulary has an ideology: it
encapsulates the language used by a particular relationship.

For example, http://schema.org/Book encapsulates the language a
webmaster uses when talking a book to a search engine. ONIX
encapsulates the language a publisher uses when talking about a book
to a bookstore. They are both talking about books, but at different
levels of detail and for different purposes.

When deciding which vocabulary or vocabularies to support we need to
start with the question: who are we communicating with? What is our
relationship with them?

# Vocabularies that are tied to format

## MARC

MARC is the LoC's famous heavyweight vocabulary for bibliographic
information. There is a binary serialization and [an XML
serialization](http://www.loc.gov/standards/marcxml/). Both use
concise terms like "100" and "x" rather than human-readable terms like
"author" and "subcategory"; these form MARC's "content designation".

Project Gutenberg serves MARC records for its books, generated from
its RDF catalog.

The 3M API will serve an XML MARC record for purchased ebooks ("Get
MARC"). I don't think Overdrive offers this feature.

## ONIX

ONIX is "intended to support computer-to-computer communication
between parties involved in creating, distributing, licensing or
otherwise making available intellectual property in published form,
whether physical or digital." It is a heavyweight format like MARC,
but MARC is optimized for library catalog and ONIX seems more general,
intended for business-to-business use.

ONIX is an XML vocabulary. It seems to define both MARC-like
abbreviated terms like "b203" and equivalent human-readable terms like
"TitleText".

* [Introduction](http://www.editeur.org/files/ONIX%203/Introduction_to_ONIX_for_Books_3.0.pdf)
* [Spec downloads](http://www.editeur.org/93/Release-3.0-Downloads/)

## Atom

Atom is a media type based on XML ("application/atom+xml") originally
designed for serializing blog posts. It defines basic, generic terms
like "author", "category", "published", and "title".

Although spartan on its own, Atom is extensible through a "profile"
mechanism, and has been widely extended. Notably by OPDS, which
defines an Atom profile for catalogs of ebooks.

* [Definition](https://tools.ietf.org/html/rfc4287)
* [OPDS spec](http://opds-spec.org/specs/opds-catalog-1-1-20110627/)

# Format-independent vocabularies

Most of these are RDF vocabularies, which can be serialized in a
number of forms, used in Linked Data applications, and included in a
number of other formats (because pretty much everything in an RDF
vocabulary is a URI).

## http://schema.org/Book

Schema.org vocabularies are RDF vocabularies that can also be
expressed in HTML 5 microdata. Its "Book" vocabulary defines basic
terms like "author", "illustrator", "isbn", "copyrightYear", and
"genre".

* [Definition](http://schema.org/Book)

## Dublin Core

A basic "vocabulary of fifteen properties for use in resource
description", first created in 1995. These include "subject",
"creator", and "title". Since 1995 many additional terms have been
added to Dublin Core, like "isReplacedBy" and "abstract".

Project Gutenberg uses [Dublin Core's
recommendation](http://dublincore.org/documents/dc-rdf/) for
presenting bibliographic information in RDF. This means a lot of DCMI
Metadata Terms and limited use of the [DCMI Abstract
Model](http://dublincore.org/documents/abstract-model/)'s "memberOf"
term.

* [The fifteen: Dublin Core Metadata Element Set](http://dublincore.org/documents/dces/)
* [Everything: DCMI Metadata Terms](http://dublincore.org/documents/dcmi-terms/)

## Miscellaneous

In addition to Dublin Core, Project Gutenberg's RDF documents also
include one element from Creative Commons (for licensing), plus a
custom Project Gutenberg vocabulary containing miscellaneous
information about authors, ebook numbers, and download locations.

# Side-by-side comparison

This table compares five major vocabularies for ebook sources, plus
one source for catalog data (BiblioCommons). It focuses on the terms we
care most about for identifying titles, tracking our inventory, and
downloading books once they've been checked out. We can add to this
table as we investigate more APIs.

<table border="1">
<tr>
 <th>Field</th> <th>Atom+OPDS</th> <th>Overdrive</th> <th>3M</th>
 <th>Axis 360</th> <th>Gutenberg</th> <th>BiblioCommons</th>
</tr>

<tr>
 <th>Internal ID</th>
 <td>atom:id or dc:identifier</td>
 <td>id</td>
 <td>ItemId</td>
 <td>titleId</td>
 <td>The URL that pgterms:ebook is rdf:about</td>
 <td>id</td>
</tr> 

<tr>
 <th>Permalink</th>
 <td>atom:id</td>
 <td>links[self], links[availability], links[metadata]</td>
 <td>BookLinkURL</td>
 <td>titleUrl</td>
 <td>Same as internal ID</td>
 <td>details_url</td>
</tr> 

<tr>
 <th>ISBN-13</th>
 <td>dc:identifier may be a urn:isbn: URI, but probably not</td>
 <td>metadata->formats[identifiers]</td>
 <td>ISBN13</td>
 <td>isbn</td>
 <td>-</td>
 <td>isbns</td>
</tr> 

<tr>
 <th>Title</th>
 <td>atom:title</td>
 <td>title</td>
 <td>Title</td>
 <td>productTitle</td>
 <td>dc:title</td>
 <td>title</td>
</tr> 

<tr>
 <th>Subtitle</th>
 <td>usually part of dc:title</td>
 <td>subtitle</td>
 <td>Subtitle</td>
 <td>-</td>
 <td>included as part of dc:title</td>
 <td>sub_title</td>
</tr> 

<tr>
 <th>Series</th>
 <td>- (some vendors may include with dc:title)</td>
 <td>series</td>
 <td>-</td>
 <td>series</td>
 <td>- (sometimes "Part II" etc. in dc:title)</td>
 <td>series</td>
</tr> 

<tr>
 <th>Author</th>
 <td>atom:author, atom:creator</td>
 <td>primaryCreator, metadata->creators</td>
 <td>Authors (list--separated how?)</td>
 <td>contributor (list--separated how?)</td>
 <td>dc:creator, with a pgterms:agent entry for each</td>
 <td>authors, additional_contributors</td>
</tr> 

<tr>
 <th>Description</th>
 <td>atom:summary (text only) or atom:content (usually HTML, often has buy form/download link and other misc metadata)</td>
 <td>metadata->shortDescription</td>
 <td>Description (HTML format)</td>
 <td>-</td>
 <td>-</td>
 <td>description</td>
</tr> 

<tr>
 <th>Publisher</th>
 <td>dc:publisher</td>
 <td>metadata->publisher</td>
 <td>Publisher</td>
 <td>publisher</td>
 <td>dc:publisher (it's always "Project Gutenberg")</td>
 <td>publishers</td>
</tr> 

<tr>
 <th>Imprint</th>
 <td>-</td>
 <td>metadata->imprint</td>
 <td>-</td>
 <td>imprint</td>
 <td>n/a</td>
 <td>-</td>
</tr>

<tr>
 <th>Publication date</th>
 <td>dc:issued (atom:published for when added to OPDS catalog)</td>
 <td>metadata->publishDate, metadata->publishDateText</td>
 <td>PubDate</td>
 <td>publicationDate</td>
 <td>dc:issued</td>
 <td>publication_date</td>
</tr> 

<tr>
 <th>Language</th>
 <td>dc:language</td>
 <td>metadata->languages</td>
 <td>Language</td>
 <td>language</td>
 <td>dc:language</td>
 <td>primary_language, languages</td>
</tr> 

<tr>
 <th>Reader Rating</th>
 <td>-</td>
 <td>metadata->starRating, metadata->popularity</td>
 <td>- (tracked, but not published through the API)</td>
 <td>-</td>
 <td>-</td>
 <td>-</td>
</tr> 

<tr>
 <th>Classifications</th>
 <td>atom:Category</td>
 <td>metadata->subjects, metadata->gradeLevels</td>
 <td>-</td>
 <td>subject, audience ("General Adult")</td>
 <td>dc:subject (LCC=Library of Congress Classification, LCSH=Library of Congress Subject Headings)</td>
 <td>suitabilities</td>
</tr> 

<tr>
 <th>Cover image</th>
 <td>link with rel="http://opds-spec.org/thumbnail"/"http://opds-spec.org/cover" /"x-stanza-cover-image"/"x-stanza-cover-image-thumbnail"</td>
 <td>images[thumbnail], metadata->images[cover] (contentreserve.com)</td>
 <td>CoverLinkURL (very high quality)</td>
 <td>-</td>
 <td>-</td>
 <td>-</td>
</tr> 

<tr>
 <th>Download link</th>
 <td>odps:indirectAcquisition for DRM-encrypted stuff. Otherwise link rel="http://opds-spec.org/acquisition" or "http://opds-spec.org/acquisition/open-access" or "http://opds-spec.org/acquisition/borrow" </td>
 <td>contentLink (using Download API)</td>
 <td>NO WAY</td>
 <td>downloadUrl from a 'checkout' call</td>
 <td>The rdf:resource of a dc:hasFormat tag</td>
 <td>n/a</td>
</tr> 

<tr>
 <th>Download link (sample)</th>
 <td>link rel="http://opds-spec.org/acquisition/sample" </td>
 <td>metadata->samples</td>
 <td>-</td>
 <td>-</td>
 <td>n/a</td>
 <td>n/a</td>
</tr> 

<tr>
 <th>Format</th>
 <td>'type' of acquisition link</td>
 <td>metadata->formats</td>
 <td>BookFormat</td>
 <td>availability/availableFormats</td>
 <td>dcam:hasFormat, each with a pgterms:file stanza</td>
 <td>n/a</td>
</tr> 

<tr>
 <th>File size</th>
 <td>-</td>
 <td>metadata->formats[fileSize]</td>
 <td>Size</td>
 <td>fileSize (but seems to only exist for audio books)</td>
 <td>pgterms:file/dc:extent</td>
 <td>n/a</td>
</tr> 

<tr>
 <th>Purchased copies</th>
 <td>-</td>
 <td>availability->copiesOwned</td>
 <td>TotalCopies</td>
 <td>availability/totalCopies</td>
 <td>n/a</td>
 <td>"copies" API for physical copies</td>
</tr> 

<tr>
 <th>Available copies</th>
 <td>-</td>
 <td>availability->copiesAvailable</td>
 <td>AvailableCopies</td>
 <td>availability/availableCopies</td>
 <td>n/a</td>
 <td>"copies" API for physical copies</td>
</tr> 

<tr>
 <th>Size of hold queue</th>
 <td>-</td>
 <td>availability->numberOfHolds</td>
 <td>OnHoldCount</td>
 <td>availability/holdQueueSize</td>
 <td>n/a</td>
 <td>n/a</td>
</tr> 

<tr>
 <th>Other</th>
 <td>atom:rights supersedes dc:rights. Library use case probably has to be worked out on a case-by-case basis.</td>
 <td>metadata->awards, metadata->reviews, metadata->popularity, metadata->sortTitle</td>
 <td>NumberOfPages (always seems to be missing or wrong), PhysicalISBN</td>
 <td>annotation ("ENGLISH"), addedDate (i.e. date added to inventory), minLoanPeriod, maxLoanPeriod, availability/updateDate, availability/Checkouts, availability/Holds
<p>Availability information per patron: holdQueuePosition, isInHoldQueue, isReserved, reservedEndDate, isCheckedout, checkoutFormat, checkoutStartDate, checkoutEndDate, downloadURl
</td>
 <td>dc:rights (some PG books are copyrighted and may have restrictions on distribution, but it's done on a per-book basis and spot checks turn up nothing special)</td>
 <td>pages, edition, contents (table of contents)</td>
</tr> 

</table>